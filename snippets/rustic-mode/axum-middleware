# -*- mode: snippet -*-
#name : axum-middleware
#key : axum-middleware
#contributor : hackartist
# --
pub async fn middleware(
    State(_state): State<AppState>,
    req: Request,
    next: Next,
) -> std::result::Result<Response<Body>, Error> {
    tracing::debug!("Project authorization middleware");
    // TODO: .layer(middleware::from_fn_with_state(AppState::default(), middleware))
    let (mut _parts, body) = req.into_parts();

    // Reconstruct request and continue to the handler
    let req = Request::from_parts(_parts, body);
    Ok(next.run(req).await)
}
